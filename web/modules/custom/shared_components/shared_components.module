<?php

/**
 * @file
 * Shared Components module - Componentes globales para multisite.
 */

use Drupal\Core\Routing\RouteMatchInterface;

/**
 * Implements hook_help().
 */
function shared_components_help($route_name, RouteMatchInterface $route_match) {
  switch ($route_name) {
    case 'help.page.shared_components':
      return '<p>' . t('MÃ³dulo para componentes compartidos entre sitios con arquitectura enterprise.') . '</p>';
  }
}

/**
 * Implements hook_library_info_build().
 */
function shared_components_library_info_build() {
  try {
    /** @var \Drupal\shared_components\Service\SharedComponentsService $service */
    $service = \Drupal::service('shared_components.service');
    return $service->buildLibraries();
  } catch (\Exception $e) {
    \Drupal::logger('shared_components')->error('Failed to build libraries: @error', [
      '@error' => $e->getMessage()
    ]);
    return [];
  }
}

/**
 * Implements hook_cache_flush().
 */
function shared_components_cache_flush() {
  try {
    \Drupal::service('shared_components.service')->clearCache();
  } catch (\Exception $e) {
    \Drupal::logger('shared_components')->error('Failed to clear cache: @error', [
      '@error' => $e->getMessage()
    ]);
  }
}