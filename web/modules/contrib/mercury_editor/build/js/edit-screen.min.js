!function(){"use strict";((e,t,o,r)=>{let i,n="open";function a(e,t){const o=document.querySelector("#me-preview");e?o.style.width=e:o.style.removeProperty("width"),t?o.style.height=t:o.style.removeProperty("height")}function d(e){const t=document.querySelector('[data-drupal-selector="edit-submit"]:not([disabled])');if(t){const e=t.closest("form").querySelectorAll("input, textarea, select")||[],o=Array.from(e).filter((e=>!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)&&!e.validity.valid));o.length?(o[0].focus(),o[0].reportValidity()):t.dispatchEvent(new Event("mousedown"))}}function l(e){const t=(document.querySelector(".me-edit-screen-redirect-url")??{}).value;return window.location.href=t,!1}function c(e){const t=document.querySelector("#me-preview");t&&(t.style.pointerEvents="mouseup"==e.type?"auto":"none")}o(window).on("dialog:afterclose",((e,t,o)=>{"MERCURY-DIALOG"==(o[0]||{}).tagName&&document.getElementById("me-preview").contentWindow.postMessage({type:"onCloseMercuryDialog"})})),e.behaviors.mercuryEditorEditScreen={attach:function(o,s){const m=r("me-first-error",".js-form-item.error",o)[0];if(m&&(m.focus(),m.scrollIntoView({behavior:"smooth"})),r("me-toolbar","#me-toolbar",o).length&&function(){function o(){const e=document.querySelector(".me-mobile-presets");if(e){const t=e.options[e.selectedIndex??0].value.split("x");a(t[0]+"px",Math.min(t[1],window.innerHeight-document.getElementById("me-toolbar").offsetHeight-20)+"px")}else a("390px",Math.min("844",window.innerHeight-document.getElementById("me-toolbar").offsetHeight-20)+"px")}const r=document.querySelector(".me-mobile-presets");r&&r.addEventListener("change",o),document.querySelector("#me-mobile-toggle-btn").addEventListener("click",(e=>(r&&(r.style.display="block"),o(),window.addEventListener("resize",o),e.preventDefault(),e.stopPropagation(),!1))),document.querySelector("#me-desktop-toggle-btn").addEventListener("click",(e=>(r&&(r.style.display="none"),window.removeEventListener("resize",o),a("100%","100%"),e.preventDefault(),e.stopPropagation(),!1))),document.querySelector('[data-drupal-selector="edit-submit"]:not([disabled])')?document.querySelector("#me-save-btn").addEventListener("click",d):document.querySelector("#me-save-btn").remove(),document.querySelector("#me-done-btn").addEventListener("click",l),t.mercuryEditor&&t.mercuryEditor.width&&localStorage.setItem("mercury-dialog-dock-default-width",t.mercuryEditor.width);let c="true"===localStorage.getItem("mercury-dialog-dock-collapsed");n=c?"closed":"open";const s=document.querySelector("#me-sidebar-toggle-btn");s.addEventListener("click",(e=>("open"===n?(document.documentElement.style.setProperty("--me-dialog-dock-width","10px"),localStorage.setItem("mercury-dialog-dock-collapsed","true")):(i=localStorage.getItem("mercury-dialog-dock-default-width"),i&&document.documentElement.style.setProperty("--me-dialog-dock-width",`${i}px`)),e.preventDefault(),e.stopPropagation(),!1))),document.addEventListener("mercury:dockResize",(t=>{let o=t.detail.width;o>10?(n="open",s.classList.remove("me-button--sidebar-expand"),s.classList.add("me-button--sidebar-collapse"),s.innerHTML=`<span>${e.t("Hide sidebar")}</span>`,s.setAttribute("title",e.t("Hide sidebar")),localStorage.removeItem("mercury-dialog-dock-collapsed")):(n="closed",s.classList.remove("me-button--sidebar-collapse"),s.classList.add("me-button--sidebar-expand"),s.innerHTML=`<span>${e.t("Show sidebar")}</span>`,s.setAttribute("title",e.t("Show sidebar")),localStorage.setItem("mercury-dialog-dock-collapsed","true")),localStorage.setItem("mercury-dialog-dock-width",o)}))}(),r("me-edit-tray","#me-edit-screen",o).length){const r=o.querySelector("#me-edit-screen");if(r){e.mercuryDialog(r).show(),void 0!==e.Ajax&&void 0===e.Ajax.prototype.beforeSerializeMercuryEditor&&(e.Ajax.prototype.beforeSerializeMercuryEditor=e.Ajax.prototype.beforeSerialize,e.Ajax.prototype.beforeSerialize=function(e,o){this.beforeSerializeMercuryEditor.apply(this,arguments);const r=t.ajaxPreviewPageState||{};o.data["ajax_preview_page_state[theme]"]=r.theme,o.data["ajax_preview_page_state[theme_token]"]=r.theme_token,o.data["ajax_preview_page_state[libraries]"]=r.libraries}),document.addEventListener("mousedown",c),document.addEventListener("mouseup",c)}}if(r("me-preview-iframe","#me-preview",o).length){const e=document.querySelector("#me-preview");e.src=e.getAttribute("data-src")}}}})(Drupal,drupalSettings,jQuery,once)}();
